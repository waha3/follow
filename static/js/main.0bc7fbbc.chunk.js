(this["webpackJsonpconnect-with-follow-button"]=this["webpackJsonpconnect-with-follow-button"]||[]).push([[0],{1028:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(674),r=n(2),o=n(33),s=n(49),i=n(9),l=(n(709),n(48)),u=n(16),d=n.n(u),b=n(694),j=n(692),f=n(43);var h=function(e){var t=e.setAccount,n=function(){var e=window.ethereum;return Boolean(e&&e.isMetaMask)};Object(c.useEffect)((function(){a()}),[]);var a=function(){var e=Object(l.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n()){e.next=13;break}return e.prev=1,e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:c=e.sent,t(c[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b.b.error(e.t0.message);case 11:e.next=14;break;case 13:b.b.error("Please install MetaMask.");case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(j.a,{className:"connectButton",onClick:a,children:"Connect wallet"})},O=n(553),m=n(1042),w=n(1044),p=n(1043),x=n(1041),v=n(1039),y=n(1040),g=n(1045),k=n(1046),C=n(684),I=n(199),S=(n(953),["key","name"]);function A(){var e=Object(I.a)(),t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],l=n[1],u=Object(c.useState)([]),d=Object(i.a)(u,2),C=d[0],A=d[1],B=Object(c.useState)(1),T=Object(i.a)(B,2),F=T[0],L=T[1],M=Object(c.useState)(20),_=Object(i.a)(M,2),q=_[0],E=_[1],N=Object(c.useState)(!0),U=Object(i.a)(N,2),G=U[0],J=U[1];Object(c.useEffect)((function(){var t=Object(I.d)(Object(I.e)(e,"address_list/"),Object(I.c)());Object(I.b)(t,(function(e){var t=e.val(),n=Object.keys(t);A(n)}));var n=setInterval((function(){var e=Array.from(document.querySelectorAll(".ant-list-item-action .buttonText-0-2-8")).map((function(e){return e.textContent}));e.length===q&&e.every((function(e){return"follow"===e.toLowerCase()||"following"===e.toLowerCase()}))&&(console.log("here"),J(!1),window.clearInterval(n))}),100);return function(){window.clearInterval(n)}}),[]);return Object(f.jsxs)("div",{className:"container",children:[a?Object(f.jsx)(j.a,{style:{width:"auto"},children:a}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{children:"Connect with Follow Button"}),Object(f.jsx)(h,{setAccount:l})]}),Object(f.jsxs)(m.a,{name:"dynamic_form_nest_item",onFinish:function(t){var n=t.list.map((function(e){return e.address}));A(n);var c,a=Object(s.a)(n);try{for(a.s();!(c=a.n()).done;){var r=c.value;Object(I.f)(Object(I.e)(e,"address_list/"+r),r)}}catch(o){a.e(o)}finally{a.f()}},autoComplete:"off",style:{marginTop:10,width:800},children:[Object(f.jsx)(m.a.List,{name:"list",children:function(e,t){var n=t.add,c=t.remove;return Object(f.jsxs)(f.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name,a=Object(o.a)(e,S);return Object(f.jsxs)(w.b,{style:{display:"flex"},align:"baseline",children:[Object(f.jsx)(m.a.Item,Object(r.a)(Object(r.a)({style:{width:800}},a),{},{name:[n,"address"],rules:[{required:!0,message:"Missing address"}],children:Object(f.jsx)(p.a,{placeholder:"wallet address"})})),Object(f.jsx)(g.a,{onClick:function(){return c(n)}})]},t)})),Object(f.jsx)(m.a.Item,{children:Object(f.jsx)(j.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(f.jsx)(k.a,{}),children:"Add Wallet Address"})})]})}}),Object(f.jsx)(m.a.Item,{children:Object(f.jsx)(j.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}),Object(f.jsx)(x.b,{style:{width:800},header:Object(f.jsxs)(v.a,{justify:"space-between",children:[Object(f.jsx)(y.a,{children:"follow list"}),Object(f.jsx)(y.a,{children:Object(f.jsx)(j.a,{type:"primary",disabled:G,onClick:function(){for(var e=0,t=Array.from(document.querySelectorAll(".ant-list-item-action .buttonText-0-2-8"));e<t.length;e++){var n=t[e];if("follow"===n.textContent.toLowerCase())n.click()}},children:"batch follow"})})]}),dataSource:C,pagination:{pageSize:q,current:F,onChange:function(e,t){L(e),E(t)}},renderItem:function(e,t){return Object(f.jsx)(x.b.Item,{actions:[Object(f.jsx)(O.FollowButton,{provider:window.ethereum,namespace:"CyberConnect",toAddr:e,env:O.Env.PRODUCTION,chain:O.Blockchain.ETH,onSuccess:function(e){b.b.success(e.code)},onFailure:function(e){b.b.error(e.code+"  "+e.message)}},e)],children:e},e)}})]})}Object(C.a)({apiKey:"AIzaSyB7U2BxIp7VdA0nLrsuxxfUF6ybNTvTxO8",authDomain:"wechat-follow.firebaseapp.com",projectId:"wechat-follow",storageBucket:"wechat-follow.appspot.com",messagingSenderId:"1006898251801",appId:"1:1006898251801:web:c20393888d3d40a8588288",measurementId:"G-QCZGJCSHVG",databaseURL:"https://wechat-follow-default-rtdb.firebaseio.com/"});var B=document.getElementById("root");a.createRoot(B).render(Object(f.jsx)(c.StrictMode,{children:Object(f.jsx)(A,{})}))},709:function(e,t,n){},830:function(e,t){},849:function(e,t){},850:function(e,t){},891:function(e,t){},892:function(e,t){},900:function(e,t){},901:function(e,t){}},[[1028,1,2]]]);
//# sourceMappingURL=main.0bc7fbbc.chunk.js.map