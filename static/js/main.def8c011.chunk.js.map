{"version":3,"sources":["components/ConnectButton.tsx","App.tsx","index.tsx"],"names":["ConnectButton","setAccount","isMetaMaskInstalled","ethereum","window","Boolean","isMetaMask","useEffect","handleOnClick","a","request","method","accounts","message","error","className","onClick","App","db","getDatabase","useState","account","addressList","setAddressList","currentPage","setCurrentPage","pageSize","setPageSize","batchBtnDisbled","setBatchBtnDisbled","qs","query","ref","orderByKey","onValue","snapshot","data","val","formatedData","Object","keys","map","random","Math","address","sort","b","id","setInterval","btnTextList","Array","from","document","querySelectorAll","item","textContent","length","every","text","toLowerCase","clearInterval","style","width","name","onFinish","values","list","i","set","autoComplete","marginTop","List","fields","add","remove","key","restField","display","align","Item","rules","required","placeholder","MinusCircleOutlined","type","block","icon","PlusOutlined","htmlType","header","justify","disabled","click","dataSource","pagination","current","onChange","page","renderItem","index","actions","provider","namespace","toAddr","env","Env","PRODUCTION","chain","Blockchain","ETH","onSuccess","e","success","code","onFailure","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","rootElement","getElementById","ReactDOMClient","render"],"mappings":"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","file":"static/js/main.def8c011.chunk.js","sourcesContent":["import { useEffect } from \"react\";\r\nimport { Button, message } from \"antd\";\r\n\r\nfunction ConnectButton({ setAccount }) {\r\n  // Check function if MetaMask is installed\r\n  const isMetaMaskInstalled = () => {\r\n    const { ethereum } = window;\r\n    return Boolean(ethereum && ethereum.isMetaMask);\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleOnClick();\r\n  }, []);\r\n\r\n  const handleOnClick = async () => {\r\n    if (isMetaMaskInstalled()) {\r\n      // Request to connect to MetaMask\r\n      try {\r\n        const accounts = await window.ethereum.request({\r\n          method: \"eth_requestAccounts\",\r\n        });\r\n        // Update the state for account\r\n        setAccount(accounts[0]);\r\n      } catch (error) {\r\n        message.error(error.message);\r\n      }\r\n    } else {\r\n      message.error(\"Please install MetaMask.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button className=\"connectButton\" onClick={handleOnClick}>\r\n      Connect wallet\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport default ConnectButton;\r\n","import { useEffect, useState, useRef } from \"react\";\nimport \"./styles.css\";\nimport ConnectButton from \"./components/ConnectButton\";\nimport {\n  FollowButton,\n  Env,\n  Blockchain,\n} from \"@cyberconnect/react-follow-button\";\nimport { Form, Input, Button, Space, List, message, Row, Col } from \"antd\";\nimport { MinusCircleOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { initializeApp } from \"firebase/app\";\nimport {\n  getDatabase,\n  ref,\n  set,\n  onValue,\n  query,\n  startAt,\n  limitToFirst,\n  limitToLast,\n  endAt,\n  orderByKey,\n} from \"firebase/database\";\n\nimport \"antd/dist/antd.min.css\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyB7U2BxIp7VdA0nLrsuxxfUF6ybNTvTxO8\",\n  authDomain: \"wechat-follow.firebaseapp.com\",\n  projectId: \"wechat-follow\",\n  storageBucket: \"wechat-follow.appspot.com\",\n  messagingSenderId: \"1006898251801\",\n  appId: \"1:1006898251801:web:c20393888d3d40a8588288\",\n  measurementId: \"G-QCZGJCSHVG\",\n  databaseURL: \"https://wechat-follow-default-rtdb.firebaseio.com/\",\n};\n\ninitializeApp(firebaseConfig);\n\nexport default function App() {\n  const db = getDatabase();\n  const [account, setAccount] = useState<string>(\"\");\n  const [addressList, setAddressList] = useState<string[]>([]);\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [pageSize, setPageSize] = useState<number>(20);\n  const [batchBtnDisbled, setBatchBtnDisbled] = useState(true);\n\n  const onFinish = (values: { list: { address: string }[] }) => {\n    const list = values.list.map((val) => val.address);\n    setAddressList(list);\n\n    for (let i of list) {\n      set(ref(db, \"address_list/\" + i), i);\n    }\n  };\n\n  useEffect(() => {\n    const qs = query(ref(db, \"address_list/\"), orderByKey());\n    onValue(qs, (snapshot) => {\n      const data = snapshot.val();\n      const formatedData = Object.keys(data)\n        .map((val) => ({\n          random: Math.random(),\n          address: val,\n        }))\n        .sort((a, b) => a.random - b.random)\n        .map((val) => val.address);\n      setAddressList(formatedData);\n    });\n  }, []);\n\n  useEffect(() => {\n    setBatchBtnDisbled(true);\n    // batch follow\n    let id = setInterval(() => {\n      let dom = Array.from(\n        document.querySelectorAll(\".ant-list-item-action .buttonText-0-2-8\")\n      );\n      let btnTextList = dom.map((item) => item.textContent);\n\n      if (\n        btnTextList.length === pageSize &&\n        btnTextList.every(\n          (text) =>\n            text.toLowerCase() === \"follow\" ||\n            text.toLowerCase() === \"following\"\n        )\n      ) {\n        setBatchBtnDisbled(false);\n\n        window.clearInterval(id);\n      }\n    }, 100);\n    return () => {\n      window.clearInterval(id);\n    };\n  }, [pageSize, currentPage]);\n\n  const handlePageChange = (page: number, pageSize: number) => {\n    setCurrentPage(page);\n    setPageSize(pageSize);\n  };\n\n  const handleBatchFollow = () => {\n    let dom = Array.from(\n      document.querySelectorAll(\".ant-list-item-action .buttonText-0-2-8\")\n    );\n\n    for (let i of dom) {\n      if (i.textContent.toLowerCase() === \"follow\") {\n        let ele = i;\n        ele.click();\n      }\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      {account ? (\n        <Button\n          style={{\n            width: \"auto\",\n          }}\n        >\n          {account}\n        </Button>\n      ) : (\n        <>\n          <h1>Connect with Follow Button</h1>\n          <ConnectButton setAccount={setAccount}></ConnectButton>\n        </>\n      )}\n      <Form\n        name=\"dynamic_form_nest_item\"\n        onFinish={onFinish}\n        autoComplete=\"off\"\n        style={{\n          marginTop: 10,\n          width: 800,\n        }}\n      >\n        <Form.List name=\"list\">\n          {(fields, { add, remove }) => (\n            <>\n              {fields.map(({ key, name, ...restField }) => (\n                <Space key={key} style={{ display: \"flex\" }} align=\"baseline\">\n                  <Form.Item\n                    style={{\n                      width: 800,\n                    }}\n                    {...restField}\n                    name={[name, \"address\"]}\n                    rules={[{ required: true, message: \"Missing address\" }]}\n                  >\n                    <Input placeholder=\"wallet address\" />\n                  </Form.Item>\n                  <MinusCircleOutlined onClick={() => remove(name)} />\n                </Space>\n              ))}\n              <Form.Item>\n                <Button\n                  type=\"dashed\"\n                  onClick={() => add()}\n                  block\n                  icon={<PlusOutlined />}\n                >\n                  Add Wallet Address\n                </Button>\n              </Form.Item>\n            </>\n          )}\n        </Form.List>\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\">\n            Submit\n          </Button>\n        </Form.Item>\n      </Form>\n      <List\n        style={{\n          width: 800,\n        }}\n        header={\n          <Row justify=\"space-between\">\n            <Col>follow list</Col>\n            <Col>\n              <Button\n                type=\"primary\"\n                disabled={batchBtnDisbled}\n                onClick={handleBatchFollow}\n              >\n                batch follow\n              </Button>\n            </Col>\n          </Row>\n        }\n        dataSource={addressList}\n        pagination={{\n          pageSize: pageSize,\n          current: currentPage,\n          onChange: handlePageChange,\n        }}\n        renderItem={(address, index) => (\n          <List.Item\n            key={address}\n            actions={[\n              <FollowButton\n                key={address}\n                provider={window.ethereum}\n                namespace=\"CyberConnect\"\n                toAddr={address}\n                env={Env.PRODUCTION}\n                chain={Blockchain.ETH}\n                onSuccess={(e) => {\n                  message.success(e.code);\n                }}\n                onFailure={(e) => {\n                  message.error(e.code + \"  \" + e.message);\n                }}\n              />,\n            ]}\n          >\n            {address}\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport * as ReactDOMClient from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = ReactDOMClient.createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}